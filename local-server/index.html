<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoteloo</title>
</head>
<body>
    <h1>Hoteloo</h1>

    <p> Choose sorting algorithm : </p>

    <select id="algorithm">
        <option value="bubblesort">Bubble Sort</option>
        <option value="insertionsort">Insertion Sort</option>
        <option value="selectionsort">Selection Sort</option>
    </select>

    <input type="number" id="entries">

    <button onclick="test()">Search</button>

    <p id="results"></p>

    <script> 

        // WORST CODE EVER BUT KINDA WORKS
        
        const algorithm_menu = document.getElementById("algorithm");
        const entries = document.getElementById("entries");
        const results = document.getElementById("results");

        async function test() { 
            
            const data = await fetch(`http://192.168.60.32:4001/search/${algorithm_menu.value}?limit=${entries.value}`); //192.168.60.32

            const json_ = await data.json();

            const hotelList = json_.result

            for(let i = 0; i<hotelList.length; i++){

                const hotel = hotelList[i];
                let newDiv = document.createElement("div");
                newDiv.setAttribute("class", "box")

                let name = document.createElement("p");
                name.setAttribute("class", "name");
                name.style.margin = "4px 0px";
                name.innerHTML = `${hotel.hotel_name}<br>`;
                newDiv.appendChild(name);

                let address = document.createElement("p");
                address.setAttribute("class", "data");
                address.style.margin = "4px 0px";
                address.innerHTML = `Address: ${hotel.address}<br>`;
                newDiv.appendChild(address);

                let price = document.createElement("p");
                price.setAttribute("class", "data");
                price.style.margin = "4px 0px";
                price.innerHTML = `Price: $${hotel.price}<br>`;
                newDiv.appendChild(price);

                let rating = document.createElement("p");
                rating.setAttribute("class", "data");
                rating.style.margin = "4px 0px";
                rating.innerHTML = `Rating: ${hotel.hotel_rating} ${hotel.hotel_experience}`;
                newDiv.appendChild(rating);

                let amenities = document.createElement("p");
                amenities.setAttribute("class", "data");
                amenities.style.margin = "4px 0px";
                amenities.innerHTML = `Amenities:<br>`;

                let list = document.createElement("ul");
                list.style.margin = "0px 0px";

                const amenityList = JSON.parse(hotel.amenities.replaceAll("'", '"'));

                for (let amenity of amenityList){

                    let newElement = document.createElement("li");
                    newElement.innerHTML += `${amenity}<br>`;
                    list.appendChild(newElement);

                }

                amenities.appendChild(list);

                newDiv.appendChild(amenities);

                newDiv.style.padding = "8px 12px";
                results.appendChild(newDiv);

            }

        }
            
    </script>

</body>
</html>